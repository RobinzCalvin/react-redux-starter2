# Описание принципов работы с фичами

## Общие положения

Фича представляет собой обособленный кусок функциональности, который может зависеть только от сервисов находящихся в проекте и от shared-компонент. По хорошему фича должна быть написана так, чтобы теоретически было возможным повторное использование в другом проекте с минимальными трудозатратами на состыковку.

Из-за того что контейнеры большинства фич используются не на всех страницах приложения (а иногда даже не для всех видов пользователей), можно сделать вывод, что код для конкретной фичи лучше подгружать в момент надобности, а не при инициализации приложения. Ленивая загрузка фич позволяет значительно ускорить первоначальную загрузку и инициализацию приложения.

Для того чтобы фича поддерживала ленивую загрузку нужно соблюдать следующие соглашения:
* собирать все полезные данные фичи в файле `entry.ts` (для этого есть хелпер `makeFeatureEntry`) и экспортировать получившийся объект и тип этого объекта (тип можно взять с помощью оператора `typeof`).
* в файле `loader.ts` нужно написать лоадер, который будет содержать динамический импорт данных фичи, пример содержимого `loader.ts`:
```
import { Entry } from './entry';

export function loadEntry(): Promise<Entry> {
  return import(/* webpackChunkName: "featureName" */ './entry').then(feature => feature.entry);
}
```
* в файле `index.ts` нужно экспортировать лоадер и тип данных фичи
* нельзя импортировать файлы фичи напрямую из других мест приложения, иначе не сработает выделение кода в отдельный бандл и этот код попадет в главный бандл приложения

